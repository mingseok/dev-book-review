## 3장 타입과 추상화
 - 지하철 예시를 통해 추상화를 설명함
    ```
    지하철을 갈아탈 때 지형은 중요하지 않음. 중요한 것은 연결, 즉 열차를 갈아타는 것
    -> 승객 입장에서 지하철을 탈때 꼭 알아야하는 사실만 정확하게 표현(지하철 노선 추상화)
    ```

### 추상화를 통한 복잡성 극복
 - 헤리 백의 지하철 노선도는 불필요한 지형 정보를 제거함으로써 단순함을 달성한 추상화의 훌륭한 예시 (지형 정보 제거, 역 사이의 연결성 강조 -> 승객들의 목적에 맞게 현실을 단순화)
 - 추상화의 목적은 불필요한 부분을 무시함으로써 현실에 존재하는 복잡성을 극복하는 것이다.
 - 추상화는 복잡한 현실을 단순화하기 위해 사용하는 인간의 가장 기본적인 인지 수단이다.

    ```
    추상화
    - 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법.
    ```

### 객체지향과 추상화

#### 모두 트럼프일 뿐
- 객체지향 패러다임과 추상화의 관계 설명을 위해 이상한 나라의 엘리스 인용
    ```
    여왕의 행렬에는 많은 객체들이 존재(신하, 공주와 왕자, 하객, 왕, 왕비..등)하지만 앨리스는 이 객체들중에서 하얀 토끼를 제외한 모든 객체를 "트럼프"라는 하나의 개념으로 단순화해서 바라본다. -> 각 객체들의 차이점은 무시한 채 공톰점만은 취해 단순화(추상화)
    
    * 트럼프 : 서양식 놀이용 딱지. 또는 그것으로 하는 놀이. 다이어몬트, 클로버, 하트, 스페이드 무늬가 그려진 카드가 각각 13장씩 네 벌로 나뉘고, 이 밖에 한 장이 더 있어 모두 53장으로 이루어져 있다.
    ```
#### 그룹으로 나누어 단순화 하기
 - 정원의 각 객체들의 특징
    - 정원사 : 손에 페인트 통과 붓을 들고 몸에는 **스페이드 무늬**가 그려짐
    - 병사들 : **클로버**를 들고 있음
    - 신하들 : 보석들고 아름답게 치장
    - 공주,왕자 : 정원을 깡총깡총 뛰어다님
    - 왕,왕비 : 머리에 왕관을 얹고 있음
 - 각 인들물은 비슷해 보이지만 서로 구별 할 수 있는 특징이 있음 => 각각을 객체로 분류 할 수 있음
 - 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비, 하트 잭이라는 긴 단어를 반복해서 읽기 힘듬 => "트럼프"로 줄여 부름
 - 왜 그룹을 묶어서 "트럼프"라고 부를 수 있는가? -> 각 인물들을 공통적으로 "트럼프"라고 했을 때 떠오르는 일반적인 외형과 행동 방식을 지니고 있음. 즉, 서로의 차이점을 무시하면 모두 "트럼프"라고 말할 수 있음
 - 위의 기준으로 정원에 있는 객체를 2가지 그룹으루 분리할 수 있음 -> 그룹을 나눔으로써 복잡성 감소
   - 트럼프 : 정원에 있는 객체중 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있는 객체(정원사, 병사, 신하, 공주, 왕자, 왕, 왕비)
   - 토끼 : 정원에 존재하는 객체 중 트럼프에 속하지 않는 객체(토끼, 엘리스?)



### 타입
---
#### 타입은 개념이다.
 - 개념을 대체할 수 있는 좀 더 세련된 언어 -> 타입(Type)
 - 타입은 공통점 기반으로 객체들을 묶기 위한 틀이다.

 #### 데이터 타입
  - 데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다. 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다. ( ex. 숫자형 데이터 사칙연산 가능, 문자열 데이터 문자열 연결 가능)


#### 행동이 우선이다
 - 동일한 책임을 수행하는 일련의 객체는 동일한 타입이라고 할 수 있다.
 - 어떤 객체를 다른 객체와 동일한 타입으로 분류하는 기준은?
    ```
    그 객체가 타입에 속한 다른 객체와 동일한 행동을 하기만 하면 된다.
    그 객체가 어떤 데이터를 가지고 있는지는 상관없다. 동일한 데이터를 가지고 있더라도 다른 행동을 한다면 그 객체들은 서로 다른 타입으로 분류돼야 한다.
    -> 결론적으로 객체의 타입을 결정하는 것은 객체의 행동뿐이다.
    ```
 - 타입이 데이터가 아니라 행동에 의해 결정된다는 사실은 객체지향 패러다임을 특징 짓는 중요한 몇 가지 원리와 원칙에 의미를 부여한다.
    - 같은 타입에 속한 객체는 행동만 동일하다면 서로 다른 데이터를 가질 수 있다.(행동 == 책임 == 메시지 수신)
    - 따라서, 동일한 타입에 속한 객체는 내부의 데이터 표현 방식이 다르더라도 동일한 메시지를 수신하고 이를 처리할 수 있다.
    - ***다만, 내부의 표현 방식이 다르기 때문에 동일한 메시지를 처리하는 방식은 서로 다를 수 밖에 없다. -> 다형성에 의미를 부여한다.***
    - **다형성**이란  동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력
    - 동일한 메시지를 서로 다른 방식으로 처리하기 위해서는 객체들은 동일한 메시지를 수신할 수 있어야 하기 때문에 결과적으로 다형적인 객체들은 동일한 타입에 속하게 된다.

### 타입의 계층
---
#### 트럼프 계츰
 - 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 잭, 하트 와과 하트 여왕은 정말로 트럼프인가?
    - 아니다. 단지, 트럼프와 몇 가지 특징을 공유하기 때문에 트럼프라고 불렀을 뿐이다. 더 정확하게 말하면 앨리스는 등장인물들을 트럼프가 아니라 "트럼프 인간"으로 봤던 것이다.
    - 그렇다면, 그들은 왜 트럼프가 아닌가?
        - 객체가 동일한 타입으로 분류되기 위해서는 공통의 행동을 갖어야 한다. 그들은 외적인 부분은 트럼프와 비슷하지만 행동 자체는 트럼프와 완벽하게 동일하지 않다.
        ```
        트럼프 타입의 정의 : 내연을 납작 엎드릴 수 있고, 뒤질어질 수 있으며, 걸을 때 마다 몸이 종이처럼 좌우로 펄럭이는 존재
        일반적으로 트럼프 카드는 납작 엎드릴 수 있고 뒤집어질 수 있지만 걸어다닐 수는 없다.
        -> 따라서, 위에서 트럼프라고 분류했던 타입을 트럼프 인간이라는 타입으로 분류하는 것이 맞다.
        ```
        ```
        트럼프 타입 객체 : 납작 엎드릴 수 있고 뒤집어질 수 있다.
        트럼프 인간 타입 객체 : 납잡 엎드릴 수 있고 뒤집어질 수 있고 걸을 때마다 몸이 종이처럼 좌우로 펄럭일 수 있다.
        -> 트럼프 인간은 트럼프가 할 수 있는 모든 것을 할 수 있지만 트럼프보다 좀 더 특화된 행동을 할 수 있다.(걸어다님)
        ```
        - 트럼프는 트럼프 인간을 포괄하는 좀 더 일반적인 개념이다.
        - 트럼프 인간은 트럼프보다 좀 더 특화된 행동을 하는 특수한 개념이다.
        
#### 일반화/특수화 관계
 - 위 예시의 트럼프/트럼프 인간의 관계를 일반화/특수화 관계라고 한다.
    - 위 관점에서 보면 특수한 개념을 표현하는 트럼프 인간은 좀 더 일반적인 개념을 표현하는 트럼프의 부분 집합이 된다.
 - 앨리스 이야기로 일반화/특수화 관계 정리
   ```
   트럼프가 트럼프 인간의 일반화인 이유는 트럼프가 가진 모든 행동을 트럼프 인간이 공통적으로 수행할 수 있기 때문이다.
   트럼프 인간이 특수화인 이유는 트럼프가 가진 모든 행동을 할 수 있을 뿐만 아니라 자신에게만 특수화된 행동을 추가적으로 할 수 있기 때문이다. 
   ```

#### 슈퍼타입과 서브타입
 - 슈퍼타입(Supertype) : 일반적인 타입
 - 서브타입(Subtype) : 특수한 타입
    - 두 타입 간의 관계는 행동에 의해 결정된다.
    - 서브타입은 슈퍼타입의 행위와 호환되기 때문에 서브타입은 슈퍼타입을 대체할 수 있어야 한다.
    - 일반화/특수화 표기 방법
        - 슈퍼타입은 상단, 서브타입은 하단에 표시
        - 서브타입 -> 슈퍼타입으로 빈 삼각형을 연결해서 표시
        - 서브타입에서 슈퍼타입과 중복되는 내용은 생략
        - 서브타입은 슈퍼타입의 행위에 추가적으로 자신의 특수한 행동을 추가하는 것이므로 슈퍼타입의 행동은 서브타입에게 자동으로 상속된다.

### 정적 모델
---
#### 타입의 목적
 - 타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문에
 - 엘리스의 경우 키가 커지던 작아지던 다른 객체와 구별할 수 있는 식별성은 동일하게 유지된다.
 - 따라서, 엘리스가 가질 수 있는 **모든 경우의 키 값을 나열하는 대신 앨리스의 키가 임의의 값을 가질 수 있다는 사실**만을 통해 상황을 단순하게 만들 수 있다.
 - **타입은 시간에 따라 동적으로 변하는 앨리스의 상태를 시간과 무관한 정적인 모습으로 다룰 수 있게 해준다.** (p.102 그림 3.12 참고)

#### 그래서 결국 타입은 추상화다
 - 타입은 추상화다. 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다. 결국, 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법인 것이다.


 #### 동적 모델과 정적 모델
  - 동적 모델 : 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것을 동적 모델(dynamic model)이라고 한다.
  - 타입 모델 : 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것을 타입 모델(static model)이라고 한다.
    - 객체지향 애플리케이션을 설계하고 구현하기 위해서는 객체 관점의 동적 모델과 객체를 추상화한 타입 관점의 정적 모델을 적절히 혼용해야 한다.
    - 코드를 짜서 빌드하는 것 -> 정적인 관점(컴파일 시간)
    - 디버깅을 하는 것 -> 동적인 관점(런타임 시간)
    - > 훌륭한 객체지향 프로그래머라면 애플리케이션의 동적인 관점과 정적인 관점을 모두 다루어야 한다.


#### 클래스
 - 객체지향 프로그래밍 언어에서 정적인 모델은 클래스를 이용해 구현된다.
 - 따라서, 타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것이다.
 - 클래스와 타입은 동일한 것이 아니다.
 - 타입은 객체를 분류하기 위해 사용하는 개념이다.
 - 반면, 클래스는 단지 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나이다.
 - 대부분의 객체지향 언어는 클래스를 기반으로 하기 때문에 대부분의 사람들은 클래스와 타입을 동일한 개념으로 생각한다. 
 - 클래스와 타입을 구분하는 것은 설계를 유연하게 하기위한 바탕이 된다.
 - 정리하면, **클래스는 타입을 구현하기 위해 프로그래밍 언어에서 제공하는 구현 메커니즘이다.**



